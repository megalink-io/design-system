import { useMemo } from 'react';
import {
  Meta,
  Description,
  Canvas,
  Story,
  ArgsTable,
} from '@storybook/addon-docs/blocks';
import { useForm } from 'hooks';
import { Link } from 'components/core/navigation';
import Checkbox from '.';

<Meta title="Components/core/inputs/Checkbox" component={Checkbox} />

# Checkbox

<Description of={Checkbox} />

export const getFieldsInfo = (required) => ({
  example: {
    type: 'checkbox',
    validate: (state) => required && !state,
  },
});

export const Template = (args) => {
  const fieldsInfo = useMemo(() => {
    return getFieldsInfo(args.required);
  }, [args.required]);
  const form = useForm(fieldsInfo);
  return <Checkbox {...args} {...form.fields.example} />;
};

<Canvas withToolbar>
  <Story name="Label with text" args={{ label: 'I eat pizza', required: true }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Code example

```tsx
import { Checkbox } from '@mds/components/core/inputs';
```

```tsx
<Checkbox {...form.fields.agreements} label="I agree to the privacy policy" required />
```

## Props table

<ArgsTable of={Checkbox} />

## More stories

### Label with links

<Canvas withToolbar>
  <Story
    name="Label with links"
    args={{
      label: (
        <>
          I agree to the{' '}
          <Link
            href="https://www.example.com/privacy-policy"
            target="_blank"
            children="privacy policy"
            underlined
          />
        </>
      ),
      required: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
